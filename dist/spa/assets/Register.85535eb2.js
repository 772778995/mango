import{u as v,d as F,e as V,f as b,o as B,c as C,a as t,w as g,F as x,Q as f,g as e,h as r,i as y,j as S,t as E,k}from"./index.8fd1a8c8.js";import{u as w,a as A,i as R,Q as $}from"./useSendEmail.020d0978.js";var H=_=>{const i=v(),{emailInputRef:o}=_,n=F({email:"772778995@qq.com",captcha:"",psd:"123456"}),{leftSeconds:d,sendEmailCode:s,isSendEmailCodeLoading:m}=w(),p=async()=>{!await o.value.validate()||s({captchaType:"register",email:n.value.email})},[l,u]=A(()=>V.post("/api/user/register",n.value));return{leftSeconds:d,sendEmailCodeHandler:p,isSendEmailCodeLoading:m,registerForm:n,isRegisterLoading:u,registerHandler:async()=>{const c=await l();console.log(c);const{token:h}=c;localStorage.setItem("token",h),i.replace({name:"\u9996\u9875"})}}};const Q={_flex:"~"},I={_flex:"~"},L={_flex:"1"},q={_m:"l-10px"},z={_m:"l-10px"},U=b({__name:"Register",setup(_){const i=F(),{leftSeconds:o,sendEmailCodeHandler:n,isSendEmailCodeLoading:d,registerForm:s,isRegisterLoading:m,registerHandler:p}=H({emailInputRef:i});return(l,u)=>(B(),C("div",Q,[t(k,{_m:"auto",_w:"80vw max-350px",_space:"y-10px",onSubmit:e(p)},{default:g(()=>[(B(),C(x,{key:0},[t(f,{ref_key:"emailInputRef",ref:i,modelValue:e(s).email,"onUpdate:modelValue":u[0]||(u[0]=a=>e(s).email=a),label:l.$t("\u90AE\u7BB1\u5730\u5740"),maxlength:"255",outlined:"","lazy-rules":"",rules:[a=>e(R)(a)||l.$t("\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740")]},null,8,["modelValue","label","rules"]),r("div",I,[r("div",L,[t(f,{modelValue:e(s).captcha,"onUpdate:modelValue":u[1]||(u[1]=a=>e(s).captcha=a),label:l.$t("\u9A8C\u8BC1\u7801"),outlined:"",maxlength:"6","lazy-rules":"",rules:[a=>/\d{6}/.test(a)||l.$t("\u8BF7\u8F93\u51656\u4F4D\u6570\u5B57\u7684\u9A8C\u8BC1\u7801")]},null,8,["modelValue","label","rules"])]),t(y,{_w:"170px",_m:"l-20px",_h:"56px",color:"primary",icon:"email",loading:e(o)>0||e(d),onClick:e(n)},S({default:g(()=>[r("div",q,E(l.$t("\u53D1\u9001\u90AE\u7BB1\u9A8C\u8BC1\u7801")),1)]),_:2},[e(o)>0?{name:"loading",fn:g(()=>[t($),r("div",z,E(e(o)),1)]),key:"0"}:void 0]),1032,["loading","onClick"])]),t(f,{modelValue:e(s).psd,"onUpdate:modelValue":u[2]||(u[2]=a=>e(s).psd=a),label:l.$t("\u5BC6\u7801"),maxlength:"20",outlined:"","lazy-rules":"",type:"password",rules:[a=>a.length>=6||l.$t("\u8BF7\u8F93\u5165\u81F3\u5C116\u4E2A\u5B57\u7B26\u7684\u5BC6\u7801")]},null,8,["modelValue","label","rules"])],64)),t(y,{loading:e(m),label:l.$t("\u6CE8\u518C"),icon:"person",color:"primary",_m:"!t-20px",_w:"full",_h:"54px",type:"submit"},null,8,["loading","label"])]),_:1},8,["onSubmit"])]))}});export{U as default};
